* Berechnet den Index auf j‰hrlicher Basisclearuse "pp_1998-2012.dta" set more offset matsize 11000gen year=year(datum)gen month=month(datum)drop if p_group==60drop if p_group==99*tab wertung medium* sortieren sort medium year month organgen inv = 1egen count = total(inv), by(medium p_group)egen sumcount = total(count), by(medium)gen weight=count/sumcountbysort medium p_group: sum countgen weighted=wertung*weightgen weighted2=wertung*(1/weight)gen zeitungen=0replace zeitungen =1 if medium<11gen news=0replace news=1 if medium >10 & medium<28gen magazine=0replace magazine=1 if medium>30 & medium <50gen politic=0replace politic=1 if medium >50gen print=zeitungen+magazinegen tv=news+politic * collapsencollapse (sum) weighted weighted2 (mean) wertung weight count, by(medium p_group)listtab medium* HIER DSTEN EXTRAHIERENstripplot wertung if p_grou==10, stackstripplot wertung if p_group==10, stack mlabel(medium) mlabpos(3) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)gen pos=3replace pos = 9 if medium == 1replace pos = 9 if medium == 210replace pos = 9 if medium == 22replace pos = 9 if medium == 10replace pos = 9 if medium == 46replace pos = 9 if medium == 41replace pos = 9 if medium == 25replace pos = 9 if medium == 221replace pos = 9 if medium == 33replace pos = 9 if medium == 40replace pos = 9 if medium == 24* CDU=10/SPD=20/FDP=30/GRÜNE=40/LINKE=50stripplot wertung if p_group==10 & print==1, title(CDU/CSU - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==20 & print==1, title(SPD - Print)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==30 & print==1, title(FDP - Print)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==40 & print==1, title(Grüne - Print)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==50 & print==1, title(Linke - Print)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==10 & tv==1, title(CDU/CSU - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==20 & tv==1, title(SPD - TV)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==30 & tv==1, title(FDP - TV)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==40 & tv==1, title(Grüne - TV)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot wertung if p_group==50 & tv==1, title(Linke - TV)stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==10 & print==1, title(CDU/CSU - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==20 & print==1, title(SPD - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==30 & print==1, title(FDP - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==40 & print==1, title(Grüne - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==50 & print==1, title(Linke - Print) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==10 & tv==1, title(CDU/CSU - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==20 & tv==1, title(SPD - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==30 & tv==1, title(FDP - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==40 & tv==1, title(Grüne - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot weighted if p_group==50 & tv==1, title(Linke - TV) stack mlabel(medium) mlabpos(pos) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)* Reshapen: aus long mach wide! medium und jahr identifiziert und p_group setzt die untersch. variablen reshape wide wertung weighted, i(medium) j(p_group) * Index berechnen: Differenz berechnen Wertung CDU/CSU=wertung10-SPD=wertung20gen index=wertung10-wertung20gen index_weigh=weighted10-weighted20drop wertung10 wertung20 weighted10 weighted20stripplot index, stack stripplot index_weigh, stackgen pos=3replace pos = 9 if medium == 1replace pos = 9 if medium == 210replace pos = 9 if medium == 22replace pos = 9 if medium == 10replace pos = 9 if medium == 46replace pos = 9 if medium == 41replace pos = 9 if medium == 25replace pos = 9 if medium == 221replace pos = 9 if medium == 33replace pos = 9 if medium == 40replace pos = 9 if medium == 24save index_overall.dta, replaceclearuse index_overall_reshaped.dtastripplot index, stack mlabel(medium) mlabpos(3) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)stripplot index_weigh, stack mlabel(medium) mlabpos(3) mlabvpos(pos) mlabangle(90) mlabsize(1.8) mlabgap(-2)sum index_weighspearman index index_weigh